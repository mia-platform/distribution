kind: Component
apiVersion: kustomize.config.k8s.io/v1alpha1
resources:
- servicemonitor.yaml
- prometheusrule.yaml
replacements:
- source:
    kind: Deployment
    name: cert-manager
    fieldPath: spec.selector.matchLabels
  targets:
  - select:
      kind: ServiceMonitor
      name: cert-manager
    fieldPaths:
    - spec.selector.matchLabels
- source:
    kind: Deployment
    name: cert-manager
    fieldPath: metadata.labels
  targets:
  - select:
      kind: ServiceMonitor
      name: cert-manager
    fieldPaths:
    - metadata.labels
  - select:
      kind: PrometheusRule
      name: cert-manager
    fieldPaths:
    - metadata.labels
- source:
    kind: Deployment
    name: cert-manager
    fieldPath: metadata.namespace
  targets:
  - select:
      kind: ServiceMonitor
      name: cert-manager
    fieldPaths:
    - metadata.namespace
  - select:
      kind: PrometheusRule
      name: cert-manager
    fieldPaths:
    - metadata.namespace
