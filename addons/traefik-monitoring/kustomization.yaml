kind: Component
apiVersion: kustomize.config.k8s.io/v1alpha1
resources:
- servicemonitor.yaml
replacements:
- source:
    kind: Deployment
    fieldPath: spec.selector.matchLabels
  targets:
  - select:
      kind: ServiceMonitor
      name: traefik
    fieldPaths:
    - spec.selector.matchLabels
- source:
    kind: Deployment
    fieldPath: metadata.labels
  targets:
  - select:
      kind: ServiceMonitor
      name: traefik
    fieldPaths:
    - metadata.labels
- source:
    kind: Deployment
    fieldPath: metadata.namespace
  targets:
  - select:
      kind: ServiceMonitor
      name: traefik
    fieldPaths:
    - metadata.namespace
